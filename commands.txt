UTILS COMMANDS

#DOCKER

# Login
docker login --username=<your-username>

# see current docker images
docker images


# create image
docker build --tag <dockerhub-username>/<repo-name>:<version> .
docker build --tag jeykime/vision:latest .


# to change image name
docker tag <your-image-id> <dockerhub-username>/<repo-name>:<tag>


# push image in docker hub
docker push <dockerhub-username>/<repo-name>

# Run with shell
docker run --rm -it test sh



# RUN RABBIT image
docker run -it --rm --name rabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:3.9-management





# MINIKUBE

# start
minikube start

# give google permision to use pods
minikube addons enable gcp-auth

# set namespace
kubectl create ns rabbits

# apply all yaml file in kubernetes
kubectl apply -n rabbits -f ./kubernetes/rabbit
kubectl apply -n rabbits -f ./kubernetes/db
kubectl apply -n rabbits -f ./kubernetes/ui.yaml
kubectl apply -n rabbits -f ./kubernetes/vision.yaml
kubectl apply -n rabbits -f ./kubernetes/backend.yaml

# delete all services file in kubernetes
kubectl delete -n rabbits -f ./kubernetes/rabbit
kubectl delete -n rabbits -f ./kubernetes/db
kubectl delete -n rabbits -f ./kubernetes/ui.yaml
kubectl delete -n rabbits -f ./kubernetes/vision.yaml
kubectl delete -n rabbits -f ./kubernetes/backend.yaml

# get pods
kubectl -n rabbits get pods

# use kubectl to forward the port
kubectl port-forward service/angular-service 8080:80 -n rabbits
kubectl -n rabbits port-forward rabbitmq-0 8080:15672
